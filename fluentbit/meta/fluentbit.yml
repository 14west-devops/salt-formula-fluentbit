config:
  input:
    system_metrics.conf:
      cpu:
        tag: system_metric_cpu
      disk:
        tag: system_metric_disk
      mem:
        tag: system_metric_mem
      {%- for interface in grains.ip4_interfaces.keys() %}
      netif:
        interface: {{ interface }}
        tag: system_metric_netif_{{ interface }}
      {%- endfor %}
  # NOTE: merge of the lists below does not work.
  # Specify includes to main conf on pillar or in metadata/service/support.yml
  # service:
  #   td-agent-bit.conf:
  #     - '@INCLUDE input_system_metrics.conf'
